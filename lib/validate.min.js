!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports["muso-validatejs"]=t(require("lodash")):e["muso-validatejs"]=t(e._)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";var n=r(2);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),f=n(o),l=r(3),c=n(l),s=r(9),d=n(s),v=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a(this,e),this._errors=t,this._formatter=new d.default(t,r,n)}return i(e,[{key:"failed",value:function(){return this._errors&&f.default.keys(this._errors)>0}},{key:"errors",value:function(){return this._errors}},{key:"format",value:function(){return this._formatter.formatList()}}],[{key:"check",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i={};return f.default.forEach(r,function(e,r){var n=e.indexOf("required")>-1,a=r.indexOf("*")>-1,o=r.indexOf(".*.")>-1;if(n||f.default.get(t,r)||a||o){if(n&&!f.default.get(t,r)&&!a&&!o)return void(i[r]=[e]);var l=i[r]||[],s=c.default.parseString(e);f.default.forEach(s,function(e){if(o){var n=r.split(".*."),c=f.default.first(n),s=f.default.last(n);if(f.default.isArray(f.default.get(t,c))){var d=f.default.map(f.default.get(t,c),function(t){return e.func.execute(f.default.get(t,s))});0===f.default.filter(d,function(e){return!e}).length||(i[r]=[].concat(u(l),[e.func]))}}else if(a){var v=r.replace(".*","");if(f.default.isArray(f.default.get(t,v))){var p=f.default.map(f.default.get(t,v),function(t){return e.func.execute(t)}),h=0===f.default.filter(p,function(e){return!e}).length;h||(i[r]=[].concat(u(l),[e.func]))}}else{var y=e.func.execute(f.default.get(t,r));y||(i[r]=[].concat(u(l),[e.func]))}})}}),new e(i,n,a)}}]),e}();t.default=v},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=r(4),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),l=function(){function e(){n(this,e)}return u(e,null,[{key:"parseString",value:function(e){var t=this;return e?i.default.chain(e).split(",").map(function(e){var r=e.trim().split(":"),n=r[1]?r[1].trim():null;return{string:e.trim(),func:t.getRule(r[0],n)}}).filter().value():[]}},{key:"getRule",value:function(e,t){switch(e){case"required":return new f.Required;case"min":return new f.Length({min:t});case"max":return new f.Length({max:t});case"type":return new f.Type(t);case"email":return new f.Email;default:return null}}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Length=t.Email=t.Type=t.Required=void 0;var u=r(5),a=n(u),i=r(6),o=n(i),f=r(7),l=n(f),c=r(8),s=n(c);t.Required=a.default,t.Type=o.default,t.Email=l.default,t.Length=s.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return u(e,[{key:"errorString",value:function(){return"is required"}},{key:"execute",value:function(e){return!(!e||""===e)}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=["string","int","number","alphanum","array","object","bool"],f=function(){function e(t){if(n(this,e),-1===o.indexOf(t))throw new Error("Invalid type");this._type=t}return u(e,[{key:"errorString",value:function(){switch(this._type){case"string":return"a string";case"int":return"of type int";case"number":return"a number";case"alphanum":return"alphanumerical";case"array":return"an array";case"object":return"an object";case"bool":return"a boolean";default:return"a valid type"}}},{key:"execute",value:function(e){switch(this._type){case"string":return i.default.isString(e);case"int":return i.default.isInteger(e);case"number":return i.default.isNumber(e);case"alphanum":return new RegExp(/^[a-z0-9]+$/i).test(e);case"array":return i.default.isArray(e);case"object":return i.default.isObject(e)&&!i.default.isArray(e);case"bool":return i.default.isBoolean(e);default:throw new Error("Invalid type")}}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return u(e,[{key:"errorString",value:function(){return"valid email address"}},{key:"execute",value:function(e){return!(!e||""===e)&&new RegExp(/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/).test(e)}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(){function e(t){var r=t.min,u=void 0===r?null:r,a=t.max,i=void 0===a?null:a;n(this,e),this._min=u,this._max=i}return u(e,[{key:"errorString",value:function(){return this._errorString}},{key:"execute",value:function(e){var t=this._min,r=this._max;if(t){if(i.default.isArray(e))return this._errorString="at least "+t+" items",e.length>=t;if(i.default.isNumber(e))return this._errorString="minimum "+t,e>=t;if(i.default.isString(e))return this._errorString="at least "+t+" chars",e.length>=t}if(r){if(i.default.isArray(e))return this._errorString="maximum "+r+" items",e.length<=r;if(i.default.isNumber(e))return this._errorString="maximum "+r,e<=r;if(i.default.isString(e))return this._errorString="maximum "+r+" chars",e.length<=r}return!0}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,e),this._errors=t,this._fieldNames=r,this._errorMessages=u}return u(e,[{key:"formatList",value:function(){var e=this;i.default.forEach(this._errors,function(t,r){var n=e._formatFieldName(r),u=i.default.map(t,function(e){return e.errorString()});console.log(n,u)})}},{key:"_formatFieldName",value:function(e){if(i.default.get(this._fieldNames,e))return i.default.get(this._fieldNames,e);if(e.indexOf(".*.")>-1){var t=e.split(".*."),r=i.default.first(t);return"Item "+i.default.last(t)+" in "+r}return e.indexOf("*")>-1?"Elements in "+e.replace(".*",""):i.default.upperFirst(e).split(/(?=[A-Z])/).join(" ")}}]),e}();t.default=o}])});