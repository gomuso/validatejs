!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports["muso-validatejs"]=t(require("lodash")):e["muso-validatejs"]=t(e._)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Length=t.Email=t.Type=t.Required=void 0;var u=r(5),a=n(u),i=r(6),o=n(i),l=r(7),f=n(l),c=r(8),s=n(c);t.Required=a.default,t.Type=o.default,t.Email=f.default,t.Length=s.default},function(e,t,r){"use strict";var n=r(3);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),l=n(o),f=r(4),c=n(f),s=r(9),d=n(s),m=r(1),h=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a(this,e),this._errors=t,this._formatter=new d.default(t,r,n)}return i(e,[{key:"failed",value:function(){return this._errors&&!l.default.isEmpty(this._errors)}},{key:"errors",value:function(){return this._formatter}}],[{key:"check",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i={};return l.default.forEach(r,function(e,r){var n=l.default.has(e,"required"),a=r.indexOf("*")>-1,o=r.indexOf(".*.")>-1;if(n||l.default.get(t,r)||a||o){if(n&&!l.default.get(t,r)&&!a&&!o)return void(i[r]=[new m.Required]);var f=i[r]||[],s=c.default.parseRuleObject(e);l.default.forEach(s,function(e){if(o){var n=r.split(".*."),c=l.default.first(n),s=l.default.last(n);if(l.default.isArray(l.default.get(t,c))){var d=l.default.map(l.default.get(t,c),function(t){return e.execute(l.default.get(t,s))});0===l.default.filter(d,function(e){return!e}).length||(i[r]=[].concat(u(f),[e]))}}else if(a){var m=r.replace(".*","");if(l.default.isArray(l.default.get(t,m))){var h=l.default.map(l.default.get(t,m),function(t){return e.execute(t)}),v=0===l.default.filter(h,function(e){return!e}).length;v||(i[r]=[].concat(u(f),[e]))}}else{var p=e.execute(l.default.get(t,r));p||(i[r]=[].concat(u(f),[e]))}})}}),new e(i,n,a)}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=r(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),f=function(){function e(){n(this,e)}return u(e,null,[{key:"parseRuleObject",value:function(e){var t=this;return e?i.default.chain(e).map(function(e,r){return t.getRule(r,e)}).filter().value():[]}},{key:"getRule",value:function(e,t){switch(e){case"required":return new l.Required;case"min":return new l.Length({min:t});case"max":return new l.Length({max:t});case"type":return new l.Type(t);case"email":return new l.Email;default:return null}}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return u(e,[{key:"errorString",value:function(){return"is required"}},{key:"execute",value:function(e){return!(!e||""===e)}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=["string","int","number","alphanum","array","object","bool"],l=function(){function e(t){if(n(this,e),-1===o.indexOf(t))throw new Error("Invalid type");this._type=t}return u(e,[{key:"errorString",value:function(){switch(this._type){case"string":return"a string";case"int":return"of type int";case"number":return"a number";case"alphanum":return"alphanumerical";case"array":return"an array";case"object":return"an object";case"bool":return"a boolean";default:return"a valid type"}}},{key:"execute",value:function(e){switch(this._type){case"string":return i.default.isString(e);case"int":return i.default.isInteger(e);case"number":return i.default.isNumber(e);case"alphanum":return new RegExp(/^[a-z0-9]+$/i).test(e);case"array":return i.default.isArray(e);case"object":return i.default.isObject(e)&&!i.default.isArray(e);case"bool":return i.default.isBoolean(e);default:throw new Error("Invalid type")}}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return u(e,[{key:"errorString",value:function(){return"valid email address"}},{key:"execute",value:function(e){return!(!e||""===e)&&new RegExp(/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/).test(e)}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(){function e(t){var r=t.min,u=void 0===r?null:r,a=t.max,i=void 0===a?null:a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,e),this._min=u,this._max=i,this._valueType=o}return u(e,[{key:"errorString",value:function(){var e=this._min,t=this._max;if(this._min)switch(this._valueType){case"array":return"at least "+e+" items";case"number":return"minimum "+e;case"string":return"minimum "+e+" chars";default:return"minimum "+e}switch(this._valueType){case"array":return"maximum "+t+" items";case"number":return"maximum "+t;case"string":return"maximum "+t+" chars";default:return"maximum "+t}}},{key:"execute",value:function(e){var t=this._min,r=this._max;if(t){if(i.default.isArray(e))return this._errorString="at least "+t+" items",e.length>=t;if(i.default.isNumber(e))return this._errorString="minimum "+t,e>=t;if(i.default.isString(e))return this._errorString="at least "+t+" chars",e.length>=t}if(r){if(i.default.isArray(e))return this._errorString="maximum "+r+" items",e.length<=r;if(i.default.isNumber(e))return this._errorString="maximum "+r,e<=r;if(i.default.isString(e))return this._errorString="maximum "+r+" chars",e.length<=r}return!0}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this._errors=t,this._fieldNames=r,this._errorMessages=u}return u(e,[{key:"asList",value:function(){var e={};return i.default.forEach(this._errors,function(t,r){e[r]=i.default.map(t,function(e){return e.errorString()})}),e}},{key:"asSentence",value:function(){var e=this,t={};return i.default.forEach(this._errors,function(r,n){var u=e._formatFieldName(n),a=i.default.map(r,function(e){return e.constructor.name}),o=a.indexOf("Required")>-1,l=r.length,f=i.default.chain(r).map(function(e,t){var r=e.errorString();return l>1?o?0===t?[r," and should be "]:1===t&&t<l-1?[r," and "]:t<l-1?[r,", "]:[r]:0===t?["should be ",r]:l>2&&t>0&&t<l-1?[", ",r]:[" and ",r]:o?[r]:["should be ",r]}).flatten().join("").value(),c=u+" "+f;t[n]=c,i.default.get(e._errorMessages,n)&&(t[n]=i.default.get(e._errorMessages,n))}),t}},{key:"_formatFieldName",value:function(e){if(i.default.get(this._fieldNames,e))return i.default.get(this._fieldNames,e);if(e.indexOf(".*.")>-1){var t=e.split(".*."),r=i.default.first(t);return"Item "+i.default.last(t)+" in "+r}if(e.indexOf("*")>-1)return"Elements in "+e.replace(".*","");var n=e.split(/(?=[A-Z])/).join(" ").toLowerCase();return i.default.upperFirst(n)}},{key:"_replaceLast",value:function(e,t,r){var n=e.split("");return n[e.lastIndexOf(t)]=r,n.join("")}}]),e}();t.default=o}])});